# =============================================================================
# Delivery Pipeline - Backend, Worker, Frontend (local + Render)
# Copy to .env and fill values. Do not commit .env.
# =============================================================================

# ---- Database & Redis (backend + worker) ----
DATABASE_URL=postgresql://delivery_user:delivery_pass@localhost:5432/delivery_db
REDIS_URL=redis://localhost:6379

# ---- Auth (backend + worker; same SECRET_KEY) ----
SECRET_KEY=your-secret-key-change-in-production-use-openssl-rand-hex-32
SECRET_KEY_CURRENT=
SECRET_KEY_PREVIOUS=
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_HOURS=6

# ---- Paths ----
UPLOAD_DIR=/uploads
MAX_UPLOAD_SIZE=10485760

# ---- Storage (backend + worker; local or s3) ----
# S3: set STORAGE_BACKEND=s3 + S3_BUCKET, S3_ACCESS_KEY, S3_SECRET_KEY, S3_REGION. See docs/RENDER_ENV.md.
STORAGE_BACKEND=local
S3_ENDPOINT_URL=
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=
S3_PUBLIC_BASE_URL=
STORAGE_PUBLIC_BASE_URL=
# Backwards-compatible aliases
AWS_S3_BUCKET=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=

# ---- OpenAI (backend + worker) ----
OPENAI_API_KEY=
AI_MODE=full
# Model: gpt-4o-mini (default, fast & cheap) | gpt-4o (best quality, higher cost) | gpt-4-turbo (fast text, good balance)
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.2
OPENAI_MAX_TOKENS=
OPENAI_TIMEOUT_SECONDS=60

# ---- URLs (backend + worker) ----
BACKEND_URL=http://localhost:8000
FRONTEND_URL=http://localhost:3000
CORS_ORIGINS=http://localhost:3000

# ---- Environment ----
ENVIRONMENT=local

# ---- Feature flags (worker: validation + thumbnails) ----
LIGHTHOUSE_ENABLED=true
AXE_ENABLED=true
PLAYWRIGHT_ENABLED=true
PREVIEW_THUMBNAIL_MODE=playwright

# ---- Rate limiting (backend) ----
RATE_LIMIT_AI_PER_MINUTE=30
RATE_LIMIT_PUBLIC_PER_MINUTE=60

# ---- Email (backend + worker) ----
RESEND_API_KEY=
EMAIL_FROM=
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
FROM_EMAIL=

# ---- Webhooks (backend) ----
CHAT_LOG_WEBHOOK_URL=
CHAT_LOG_WEBHOOK_SECRET=

# ---- Frontend (Next.js) ----
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_SENTRY_DSN=
